function getCookie(e){var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0}function setCookie(e,n,t){t=t||{};var o=t.expires;if("number"==typeof o&&o){var a=new Date;a.setTime(a.getTime()+1e3*o),o=t.expires=a}o&&o.toUTCString&&(t.expires=o.toUTCString()),n=encodeURIComponent(n);var i=e+"="+n;for(var c in t){i+="; "+c;var l=t[c];l!==!0&&(i+="="+l)}document.cookie=i}function deleteCookie(e){setCookie(e,"",{expires:-1})}function hasFlash(){if(null!=navigator.plugins&&navigator.plugins.length>0)return!!navigator.plugins["Shockwave Flash"];if(navigator.appVersion.indexOf("MSIE")&&!navigator.userAgent.indexOf("Opera"))try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}return!1}function initModal(e){$("body").css("overflow","hidden"),$("#modal-"+e).modal(),document.getElementById("modal-header-"+e).innerHTML="-",document.getElementById("modal-body-"+e).innerHTML='<div style="text-align: center"><i class="fa fa-refresh fa-5x fa-spin"></i></div>'}function hideModal(e){$("#modal-"+e).modal("hide")}function transport_ulogin(e){auth.ulogin(e)}function getContent(e){initModal("small"),socket.emit("getContent",{template:e,lang:nameLang})}var initLang=document.URL.split("/"),nameLang=initLang[3],socket=io.connect();socket.on("connect",function(){console.log("Client has connected to the server!"),jQuery(function(e){e(document).ready(function(){var e=document.getElementById("main_content");e&&(socket.emit("get_new_events",{lang:nameLang}),socket.emit("get_current_events",{lang:nameLang}),socket.emit("get_closed_events",{lang:nameLang}))})})});var auth={ulogin:function(e){initModal("small"),socket.emit("ulogin",{token:e})},login:function(e,n){initModal("small"),socket.emit("sing_login",{email:e,pass:n})},registr:function(e,n,t,o){initModal("small"),socket.emit("registr",{email:n,pass:t,pass2:o,nickname:e})}};socket.on("authInit",function(e){initModal("small"),1==e.success?(document.getElementById("modal-body-small").innerHTML="Успешний вход",setTimeout(function(){hideModal("small"),location.reload()},1500)):(document.getElementById("modal-body-small").innerHTML="Error",setTimeout(function(){getContent("login")},1500))}),$("#modal-small").on("hidden.bs.modal",function(){$("body").css("overflow","visible")}),$("#modal-small").on("show.bs.modal",function(){$("body").css("overflow","hidden")}),socket.on("setContent",function(e){document.getElementById("modal-body-small").innerHTML=e.html}),document.getElementById("main_content").onclick=function(e){"get_create_bet"==e.target.dataset.action&&socket.emit("get_create_bet",{lang:nameLang,id:e.target.parentNode.dataset.id})},socket.on("get_create_bet_response",function(e){betInfoBlock.dom_content.innerHTML=e.html;var n=document.getElementById("create_bet");n&&(document.getElementById("create_bet").onsubmit=function(){var e=$("#create_bet").serializeObject();return socket.emit("create_bet",{lang:nameLang,data:e}),!1})}),socket.on("get_new_events_response",function(e){newEventsBlock?newEventsBlock.dom_content.innerHTML=e.html:console.error("Error find block newEventsBlock")}),socket.on("get_current_events_response",function(e){nowEventsBlock?nowEventsBlock.dom_content.innerHTML=e.html:console.error("Error find block nowEventsBlock")}),socket.on("get_closed_events_response",function(e){closedEventsBlock?closedEventsBlock.dom_content.innerHTML=e.html:console.error("Error find block closedEventsBlock")}),socket.on("get_wallets_response",function(e){if(document.getElementById("main_content").innerHTML=e.html,$(".clipboard").length>0)if(hasFlash()){var n=new ZeroClipboard($(".clipboard"));n.on("ready",function(){n.on("aftercopy",function(){})})}else $(".clipboard").click(function(){window.prompt("",$(this).data("clipboard-text"))})}),$.fn.serializeObject=function(){var e={},n=this.serializeArray();return $.each(n,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},socket.on("get_account_page_response",function(e){document.getElementById("main_content").innerHTML=e.html;var n=document.getElementById("buy_pro_account");n&&(document.getElementById("buy_pro_account").onclick=function(){socket.emit("buy_pro_account",{lang:nameLang})});var t=document.getElementById("create_events");t&&(document.getElementById("create_events").onsubmit=function(){var e=$("#create_events").serializeObject();return socket.emit("create_events",{lang:nameLang,data:e}),!1});var o=document.getElementById("create_ticket");o&&(document.getElementById("create_ticket").onsubmit=function(){var e=$("#create_ticket").serializeObject();return socket.emit("create_ticket",{lang:nameLang,data:e}),!1})});